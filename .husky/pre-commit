#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged to format and lint
npx lint-staged

# Detect modified packages and run tests
CHANGED_PACKAGES=$(bash scripts/detect-changed-packages.sh)

if [ -n "$CHANGED_PACKAGES" ]; then
  echo ""
  echo "ðŸ§ª Executing tests for modified packages: $CHANGED_PACKAGES"
  bash scripts/run-tests-for-packages.sh $CHANGED_PACKAGES
else
  echo "âœ… No packages modified, skipping tests"
fi
